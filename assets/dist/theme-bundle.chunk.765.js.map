{"version":3,"file":"theme-bundle.chunk.765.js","mappings":"mTAMA,IAAMA,EACO,CACL,CACIC,KAAM,UACNC,KAAM,QACNC,SAAU,gBACVC,OAAQ,UAEZ,CACIH,KAAM,UACNC,KAAM,QACNC,SAAU,gBACVC,OAAQ,SAKCC,EAAS,SAAAC,G,QAC1B,SAAAD,EAAYE,GAAS,IAAAC,EAIM,OAHvBA,EAAAF,EAAAG,KAAA,KAAMF,IAAQ,MACTG,SAAWC,EAAE,yBAClBH,EAAKI,kBAAoBD,EAAE,qBAC3BH,EAAKD,QAAUA,EAAQC,CAC3B,C,EAN0BF,G,EAAAD,G,sEAMzB,IAAAQ,EAAAR,EAAAS,UAoEA,OApEAD,EAEDE,QAAA,WACIC,KAAKC,kBACT,EAACJ,EAEDI,iBAAA,WAIID,KAAKE,cAAclB,EACvB,EAACa,EAEDK,cAAA,SAAcC,GACV,IAAMC,EAAcD,EAAQE,KAAI,SAAAC,GAAA,IAC5BrB,EAAIqB,EAAJrB,KACAC,EAAIoB,EAAJpB,KACUqB,EAAOD,EAAjBnB,SACAC,EAAMkB,EAANlB,OAAM,2IAI2BH,EAAI,kEACQG,EAAM,qPAKAF,EAAI,yMAIhBqB,EAAO,kKAG6B,WAAXnB,EAAsB,WAAa,IAAE,8JAG5DA,EAAM,8FAI/CoB,KAAK,IAETR,KAAKJ,kBAAkBa,KAAKL,GAC5BJ,KAAKU,cACT,EAACb,EAEDc,gBAAA,WAGIX,KAAKJ,kBAAkBa,KAFH,+BAGxB,EAACZ,EAEDe,YAAA,SAAYC,GACRC,QAAQD,MAAMA,GACdb,KAAKW,iBACT,EAACd,EAEDa,aAAA,WACIf,EAAE,8BAA8BoB,GAAG,SAAS,WACxC,IAAM7B,EAAOS,EAAE,8BAA8Bc,OAC7CO,UAAUC,UAAUC,UAAUhC,EAClC,GACJ,EAACW,EAEDsB,QAAA,SAAQC,GACJpB,KAAKN,SAAS0B,EAAO,OAAS,SAClC,EAAC/B,CAAA,CA1EyB,CAASgC,EAAAA,E","sources":["webpack://bigcommerce-cornerstone/./assets/js/theme/custom/my-coupons.js"],"sourcesContent":["import PageManager from '../page-manager';\n\n// TODO\n// IMPORTANT: GET COUPONS REQUEST HAS BEEN MOCKED DUE TO MISSING WORKING ENDPOINT.\n// IS UP TO PINK ZEBRA TO COMPLETE IT WHEN THE API IS WORKING.\n\nconst bodyMockResponse = {\n    coupons: [\n        {\n            name: '10% OFF',\n            code: '10OFF',\n            end_date: 'Jan 11th 2024',\n            status: 'Active',\n        },\n        {\n            name: '20% OFF',\n            code: '20OFF',\n            end_date: 'Mar 20th 2024',\n            status: 'Used',\n        },\n    ],\n};\n\nexport default class MyCoupons extends PageManager {\n    constructor(context) {\n        super(context);\n        this.$overlay = $('.page .loadingOverlay');\n        this.$couponsContainer = $('.page #my-coupons');\n        this.context = context;\n    }\n\n    onReady() {\n        this.getCouponsByHost();\n    }\n\n    getCouponsByHost() {\n        // COMPLETE WITH API REQUEST AND LOADING STATE WHILE GETTING DATA\n        // DATE WHEN coupon WAS CREATED IS NOT PART OF THE RESPONSE.\n        // coupon END DATE IS USED FOR DISPLAY.\n        this.handleResults(bodyMockResponse.coupons);\n    }\n\n    handleResults(coupons) {\n        const couponsHtml = coupons.map(({\n            name,\n            code,\n            end_date: endDate,\n            status,\n        }) => (`\n            <div class='coupon-wrapper'>\n                <div class='coupon-info'>\n                    <div class='coupon-id'>${name}</div>\n                    <div class='coupon-status desktop'>${status}</div>\n                </div>\n                <div class='coupon-table'>\n                    <div class='data-column'>\n                        <h6 class='data-title'>Code</h6>\n                        <span class='coupon-code data-value'>${code}</span>\n                    </div>\n                    <div class='data-column'>\n                        <h6 class='data-title'>Valid Until</h6>\n                        <span class='data-value'>${endDate}</span>\n                    </div>\n                    <div class='data-column'>\n                        <button class='button button--primary copy-button ${status !== 'Active' ? 'u-hidden' : ''}'>Copy Code</button>\n                    </div>\n                    <div class='data-column mobile'>\n                        <div class='coupon-status'>${status}</div>\n                    </div>\n                </div>\n            </div>\n        `)).join('');\n\n        this.$couponsContainer.html(couponsHtml);\n        this.bindCopyLink();\n    }\n\n    handleNoResults() {\n        const resultsHTML = '<div>No coupons found.</div>';\n\n        this.$couponsContainer.html(resultsHTML);\n    }\n\n    handleError(error) {\n        console.error(error);\n        this.handleNoResults();\n    }\n\n    bindCopyLink() {\n        $('.coupon-table .copy-button').on('click', () => {\n            const code = $('.coupon-table .coupon-code').html();\n            navigator.clipboard.writeText(code);\n        });\n    }\n\n    loading(flag) {\n        this.$overlay[flag ? 'show' : 'hide']();\n    }\n}\n"],"names":["bodyMockResponse","name","code","end_date","status","MyCoupons","_PageManager","context","_this","call","$overlay","$","$couponsContainer","_proto","prototype","onReady","this","getCouponsByHost","handleResults","coupons","couponsHtml","map","_ref","endDate","join","html","bindCopyLink","handleNoResults","handleError","error","console","on","navigator","clipboard","writeText","loading","flag","PageManager"],"sourceRoot":""}